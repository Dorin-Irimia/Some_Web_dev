<!DOCTYPE html>
<html>
<head>
  <title>Control ESP32</title>
</head>
<body>
  <h1>Control Releu</h1>
  <button onclick="sendCommand('aprinde')">Aprinde Releu</button>
  <button onclick="sendCommand('stinge')">Stinge Releu</button>
  <div id="date-esp32"></div>

  <script>
    function sendCommand(command) {
      fetch('/.netlify/functions/sendCommand', { // URL către funcția Netlify
        method: 'POST',
        headers: {
          'Content-Type': 'application/json', // Trimitere JSON
        },
        body: JSON.stringify({ command: command }), // Trimitere JSON
      })
      .then(response => response.json()) // Parsează răspunsul JSON
      .then(data => console.log(data.message)); // Accesează proprietatea message
    }

    function updateData() {
      fetch('/.netlify/functions/data') // URL către funcția Netlify
        .then(response => response.json()) // Parsează răspunsul JSON
        .then(data => {
          document.getElementById('date-esp32').innerText = 'Date ESP32: ' + data.data; // Accesează proprietatea data
        });
    }

    setInterval(updateData, 5000);
  </script>
</body>
</html>